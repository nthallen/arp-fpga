--
-- VHDL Test Bench idx_fpga_lib.bench_ptrh_acquire.ptrh_acquire_tester
--
-- Created:
--          by - nort.UNKNOWN (NORT-NBX200T)
--          at - 15:28:48 02/ 7/2011
--
-- Generated by Mentor Graphics' HDL Designer(TM) 2009.2 (Build 10)
--
LIBRARY ieee;
USE ieee.std_logic_1164.all;
USE ieee.std_logic_arith.all;


ENTITY bench_ptrh_acquire IS
END bench_ptrh_acquire;


LIBRARY ieee;
USE ieee.std_logic_1164.all;
USE ieee.std_logic_arith.all;
LIBRARY idx_fpga_lib;


ARCHITECTURE rtl OF bench_ptrh_acquire IS

   -- Architecture declarations

   -- Internal signal declarations
   SIGNAL F25M  : std_ulogic;
   SIGNAL Full  : std_ulogic_vector(12 DOWNTO 0);
   SIGNAL rst   : std_ulogic;
   SIGNAL wData : std_logic_vector(23 DOWNTO 0);
   SIGNAL WrEn  : std_ulogic_vector(12 DOWNTO 0);
   SIGNAL SCL   : std_logic;
   SIGNAL SDA   : std_logic;
   SIGNAL Done  : std_ulogic;

   -- Component declarations
   COMPONENT ptrh_acquire
      PORT (
         F25M  : IN     std_ulogic;
         Full  : IN     std_ulogic_vector(12 DOWNTO 0);
         rst   : IN     std_ulogic;
         scl   : INOUT    std_logic;
         sda   : INOUT    std_logic;
         wData : OUT    std_logic_vector(23 DOWNTO 0);
         WrEn  : OUT    std_ulogic_vector(12 DOWNTO 0)
      );
   END COMPONENT;

   COMPONENT i2c_slave
      GENERIC (
         I2C_ADDR : std_logic_vector(6 DOWNTO 0) := "1000000"
      );
      PORT (
         clk : IN     std_ulogic;
         rst : IN     std_ulogic;
         scl : IN     std_logic;
         sda : INOUT  std_logic
      );
   END COMPONENT;

   -- embedded configurations
   -- pragma synthesis_off
   FOR DUT : ptrh_acquire USE ENTITY idx_fpga_lib.ptrh_acquire;
   FOR ALL : i2c_slave USE ENTITY idx_fpga_lib.i2c_slave;
   -- pragma synthesis_on

BEGIN
   --  hds hds_inst
   sht21 : i2c_slave
      GENERIC MAP (
         I2C_ADDR => "1000000"
      )
      PORT MAP (
         clk => F25M,
         rst => rst,
         scl => SCL,
         sda => SDA
      );

     ms5607 : i2c_slave
     GENERIC MAP (
        I2C_Addr => "1110111"
     )
     PORT MAP (
        clk => F25M,
        scl => SCL,
        rst => rst,
        sda => SDA
     );

   DUT : ptrh_acquire
      PORT MAP (
         F25M  => F25M,
         Full  => Full,
         rst   => rst,
         scl   => SCL,
         sda   => SDA,
         wData => wData,
         WrEn  => WrEn
      );

    clock : Process
    Begin
      F25M <= '0';
      -- pragma synthesis_off
      wait for 40 ns;
      while Done = '0' loop
        F25M <= '0';
        wait for 20 ns;
        F25M <= '1';
        wait for 20 ns;
      end loop;
      wait;
      -- pragma synthesis_on
    End Process;
    
    SCL <= 'H';
    SDA <= 'H';
    Full <= (others => '0');

  test_proc : Process Is
  Begin
    Done <= '0';
    rst <= '1';
    -- pragma synthesis_off
    wait for 120 ns;
    rst <= '0';
    wait;
    -- pragma synthesis_on
  End Process;

END rtl;